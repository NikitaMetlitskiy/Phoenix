<template>
  <div class="modal-delivery container" ref="container">
    <div
      class="modal-delivery__close"
      ref="deliveryClose"
      @click="closeModal"
    >
      <img src="/icons/icon-close.svg" alt="icon-close">
    </div>
    <!-- <svg class="modal-delivery__line modal-delivery__line--hr" width="1920" height="2" viewBox="0 0 1920 2" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 1H1920" stroke="white" stroke-width="1.33333" stroke-dasharray="6.67 6.67"/>
    </svg>

    <svg class="modal-delivery__line modal-delivery__line--vr" width="2" height="992" viewBox="0 0 2 992" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M1 992L1.00004 1.2368e-05" stroke="white" stroke-width="1.33333" stroke-dasharray="6.67 6.67"/>
    </svg> -->

    <svg
      class="modal-delivery__line"
      width="1920"
      height="992"
      viewBox="0 0 1920 992"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <!-- <g opacity="0.16"> -->
      <!-- <path d="M0 496H1920" stroke="white" stroke-width="1.33333" stroke-dasharray="6.67 6.67"/> -->
      <!-- <path d="M960 992L960 1.2368e-05" stroke="white" stroke-width="1.33333" stroke-dasharray="6.67 6.67"/> -->
      <clipPath id="modalDeliveryHor">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.33333 496.667H0V495.333H3.33333V496.667ZM16.6667 496.667H10V495.333H16.6667V496.667ZM30 496.667H23.3333V495.333H30V496.667ZM43.3333 496.667H36.6667V495.333H43.3333V496.667ZM56.6667 496.667H50V495.333H56.6667V496.667ZM70 496.667H63.3333V495.333H70V496.667ZM83.3333 496.667H76.6667V495.333H83.3333V496.667ZM96.6667 496.667H90V495.333H96.6667V496.667ZM110 496.667H103.333V495.333H110V496.667ZM123.333 496.667H116.667V495.333H123.333V496.667ZM136.667 496.667H130V495.333H136.667V496.667ZM150 496.667H143.333V495.333H150V496.667ZM163.333 496.667H156.667V495.333H163.333V496.667ZM176.667 496.667H170V495.333H176.667V496.667ZM190 496.667H183.333V495.333H190V496.667ZM203.333 496.667H196.667V495.333H203.333V496.667ZM216.667 496.667H210V495.333H216.667V496.667ZM230 496.667H223.333V495.333H230V496.667ZM243.333 496.667H236.667V495.333H243.333V496.667ZM256.667 496.667H250V495.333H256.667V496.667ZM270 496.667H263.333V495.333H270V496.667ZM283.333 496.667H276.667V495.333H283.333V496.667ZM296.667 496.667H290V495.333H296.667V496.667ZM310 496.667H303.333V495.333H310V496.667ZM323.333 496.667H316.667V495.333H323.333V496.667ZM336.667 496.667H330V495.333H336.667V496.667ZM350 496.667H343.333V495.333H350V496.667ZM363.333 496.667H356.667V495.333H363.333V496.667ZM376.667 496.667H370V495.333H376.667V496.667ZM390 496.667H383.333V495.333H390V496.667ZM403.333 496.667H396.667V495.333H403.333V496.667ZM416.667 496.667H410V495.333H416.667V496.667ZM430 496.667H423.333V495.333H430V496.667ZM443.333 496.667H436.666V495.333H443.333V496.667ZM456.666 496.667H450V495.333H456.666V496.667ZM470 496.667H463.333V495.333H470V496.667ZM483.333 496.667H476.666V495.333H483.333V496.667ZM496.666 496.667H490V495.333H496.666V496.667ZM510 496.667H503.333V495.333H510V496.667ZM523.333 496.667H516.666V495.333H523.333V496.667ZM536.666 496.667H530V495.333H536.666V496.667ZM550 496.667H543.333V495.333H550V496.667ZM563.333 496.667H556.667V495.333H563.333V496.667ZM576.667 496.667H570V495.333H576.667V496.667ZM590 496.667H583.333V495.333H590V496.667ZM603.333 496.667H596.667V495.333H603.333V496.667ZM616.667 496.667H610V495.333H616.667V496.667ZM630 496.667H623.333V495.333H630V496.667ZM643.333 496.667H636.667V495.333H643.333V496.667ZM656.667 496.667H650V495.333H656.667V496.667ZM670 496.667H663.333V495.333H670V496.667ZM683.334 496.667H676.667V495.333H683.334V496.667ZM696.667 496.667H690V495.333H696.667V496.667ZM710 496.667H703.334V495.333H710V496.667ZM723.334 496.667H716.667V495.333H723.334V496.667ZM736.667 496.667H730V495.333H736.667V496.667ZM750 496.667H743.334V495.333H750V496.667ZM763.334 496.667H756.667V495.333H763.334V496.667ZM776.667 496.667H770V495.333H776.667V496.667ZM790.001 496.667H783.334V495.333H790.001V496.667ZM803.334 496.667H796.667V495.333H803.334V496.667ZM816.667 496.667H810.001V495.333H816.667V496.667ZM830.001 496.667H823.334V495.333H830.001V496.667ZM843.334 496.667H836.667V495.333H843.334V496.667ZM856.667 496.667H850.001V495.333H856.667V496.667ZM870.001 496.667H863.334V495.333H870.001V496.667ZM883.334 496.667H876.667V495.333H883.334V496.667ZM896.668 496.667H890.001V495.333H896.668V496.667ZM910.001 496.667H903.334V495.333H910.001V496.667ZM923.334 496.667H916.668V495.333H923.334V496.667ZM936.668 496.667H930.001V495.333H936.668V496.667ZM950.001 496.667H943.334V495.333H950.001V496.667ZM963.334 496.667H956.668V495.333H963.334V496.667ZM976.668 496.667H970.001V495.333H976.668V496.667ZM990.001 496.667H983.334V495.333H990.001V496.667ZM1003.33 496.667H996.668V495.333H1003.33V496.667ZM1016.67 496.667H1010V495.333H1016.67V496.667ZM1030 496.667H1023.33V495.333H1030V496.667ZM1043.33 496.667H1036.67V495.333H1043.33V496.667ZM1056.67 496.667H1050V495.333H1056.67V496.667ZM1070 496.667H1063.33V495.333H1070V496.667ZM1083.33 496.667H1076.67V495.333H1083.33V496.667ZM1096.67 496.667H1090V495.333H1096.67V496.667ZM1110 496.667H1103.33V495.333H1110V496.667ZM1123.33 496.667H1116.67V495.333H1123.33V496.667ZM1136.67 496.667H1130V495.333H1136.67V496.667ZM1150 496.667H1143.33V495.333H1150V496.667ZM1163.33 496.667H1156.67V495.333H1163.33V496.667ZM1176.67 496.667H1170V495.333H1176.67V496.667ZM1190 496.667H1183.33V495.333H1190V496.667ZM1203.33 496.667H1196.67V495.333H1203.33V496.667ZM1216.67 496.667H1210V495.333H1216.67V496.667ZM1230 496.667H1223.33V495.333H1230V496.667ZM1243.33 496.667H1236.67V495.333H1243.33V496.667ZM1256.67 496.667H1250V495.333H1256.67V496.667ZM1270 496.667H1263.33V495.333H1270V496.667ZM1283.33 496.667H1276.67V495.333H1283.33V496.667ZM1296.67 496.667H1290V495.333H1296.67V496.667ZM1310 496.667H1303.33V495.333H1310V496.667ZM1323.33 496.667H1316.67V495.333H1323.33V496.667ZM1336.67 496.667H1330V495.333H1336.67V496.667ZM1350 496.667H1343.33V495.333H1350V496.667ZM1363.33 496.667H1356.67V495.333H1363.33V496.667ZM1376.67 496.667H1370V495.333H1376.67V496.667ZM1390 496.667H1383.33V495.333H1390V496.667ZM1403.33 496.667H1396.67V495.333H1403.33V496.667ZM1416.67 496.667H1410V495.333H1416.67V496.667ZM1430 496.667H1423.33V495.333H1430V496.667ZM1443.33 496.667H1436.67V495.333H1443.33V496.667ZM1456.67 496.667H1450V495.333H1456.67V496.667ZM1470 496.667H1463.33V495.333H1470V496.667ZM1483.33 496.667H1476.67V495.333H1483.33V496.667ZM1496.67 496.667H1490V495.333H1496.67V496.667ZM1510 496.667H1503.33V495.333H1510V496.667ZM1523.33 496.667H1516.66V495.333H1523.33V496.667ZM1536.66 496.667H1530V495.333H1536.66V496.667ZM1550 496.667H1543.33V495.333H1550V496.667ZM1563.33 496.667H1556.66V495.333H1563.33V496.667ZM1576.66 496.667H1570V495.333H1576.66V496.667ZM1590 496.667H1583.33V495.333H1590V496.667ZM1603.33 496.667H1596.66V495.333H1603.33V496.667ZM1616.66 496.667H1610V495.333H1616.66V496.667ZM1630 496.667H1623.33V495.333H1630V496.667ZM1643.33 496.667H1636.66V495.333H1643.33V496.667ZM1656.66 496.667H1650V495.333H1656.66V496.667ZM1670 496.667H1663.33V495.333H1670V496.667ZM1683.33 496.667H1676.66V495.333H1683.33V496.667ZM1696.66 496.667H1690V495.333H1696.66V496.667ZM1710 496.667H1703.33V495.333H1710V496.667ZM1723.33 496.667H1716.66V495.333H1723.33V496.667ZM1736.66 496.667H1730V495.333H1736.66V496.667ZM1750 496.667H1743.33V495.333H1750V496.667ZM1763.33 496.667H1756.66V495.333H1763.33V496.667ZM1776.66 496.667H1770V495.333H1776.66V496.667ZM1790 496.667H1783.33V495.333H1790V496.667ZM1803.33 496.667H1796.66V495.333H1803.33V496.667ZM1816.66 496.667H1810V495.333H1816.66V496.667ZM1830 496.667H1823.33V495.333H1830V496.667ZM1843.33 496.667H1836.66V495.333H1843.33V496.667ZM1856.66 496.667H1850V495.333H1856.66V496.667ZM1870 496.667H1863.33V495.333H1870V496.667ZM1883.33 496.667H1876.66V495.333H1883.33V496.667ZM1896.66 496.667H1890V495.333H1896.66V496.667ZM1910 496.667H1903.33V495.333H1910V496.667ZM1920 496.667H1916.66V495.333H1920V496.667Z" fill="white"/>
      </clipPath>
      <line ref="lineHor" opacity="0.5" x1="0" y1="496" x2="1920" y2="496" stroke="white" stroke-width="2" clip-path="url(#modalDeliveryHor)" />

      <clipPath id="modalDeliveryVert">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M959.333 3.35135V0H960.667V3.35135H959.333ZM959.333 16.7568V10.0541H960.667V16.7568H959.333ZM959.333 30.1622V23.4595H960.667V30.1622H959.333ZM959.333 43.5676V36.8649H960.667V43.5676H959.333ZM959.333 56.973V50.2703H960.667V56.973H959.333ZM959.333 70.3784V63.6757H960.667V70.3784H959.333ZM959.333 83.7838V77.0811H960.667V83.7838H959.333ZM959.333 97.1892V90.4865H960.667V97.1892H959.333ZM959.333 110.595V103.892H960.667V110.595H959.333ZM959.333 124V117.297H960.667V124H959.333ZM959.333 137.405V130.703H960.667V137.405H959.333ZM959.333 150.811V144.108H960.667V150.811H959.333ZM959.333 164.216V157.514H960.667V164.216H959.333ZM959.333 177.622V170.919H960.667V177.622H959.333ZM959.333 191.027V184.324H960.667V191.027H959.333ZM959.333 204.432V197.73H960.667V204.432H959.333ZM959.333 217.838V211.135H960.667V217.838H959.333ZM959.333 231.243V224.54H960.667V231.243H959.333ZM959.333 244.649V237.946H960.667V244.649H959.333ZM959.333 258.054V251.351H960.667V258.054H959.333ZM959.333 271.459V264.757H960.667V271.459H959.333ZM959.333 284.865V278.162H960.667V284.865H959.333ZM959.333 298.27V291.567H960.667V298.27H959.333ZM959.333 311.676V304.973H960.667V311.676H959.333ZM959.333 325.081V318.378H960.667V325.081H959.333ZM959.333 338.486V331.784H960.667V338.486H959.333ZM959.333 351.892V345.189H960.667V351.892H959.333ZM959.333 365.297V358.594H960.667V365.297H959.333ZM959.333 378.703V372H960.667V378.703H959.333ZM959.333 392.108V385.405H960.667V392.108H959.333ZM959.333 405.513V398.811H960.667V405.513H959.333ZM959.333 418.919V412.216H960.667V418.919H959.333ZM959.333 432.324V425.621H960.667V432.324H959.333ZM959.333 445.73V439.027H960.667V445.73H959.333ZM959.333 459.135V452.432H960.667V459.135H959.333ZM959.333 472.54V465.838H960.667V472.54H959.333ZM959.333 485.946V479.243H960.667V485.946H959.333ZM959.333 499.351V492.648H960.667V499.351H959.333ZM959.333 512.757V506.054H960.667V512.757H959.333ZM959.333 526.162V519.459H960.667V526.162H959.333ZM959.333 539.567V532.865H960.667V539.567H959.333ZM959.333 552.973V546.27H960.667V552.973H959.333ZM959.333 566.378V559.675H960.667V566.378H959.333ZM959.333 579.784V573.081H960.667V579.784H959.333ZM959.333 593.189V586.486H960.667V593.189H959.333ZM959.333 606.594V599.892H960.667V606.594H959.333ZM959.333 620V613.297H960.667V620H959.333ZM959.333 633.405V626.702H960.667V633.405H959.333ZM959.333 646.81V640.108H960.667V646.81H959.333ZM959.333 660.216V653.513H960.667V660.216H959.333ZM959.333 673.621V666.919H960.667V673.621H959.333ZM959.333 687.027V680.324H960.667V687.027H959.333ZM959.333 700.432V693.729H960.667V700.432H959.333ZM959.333 713.837V707.135H960.667V713.837H959.333ZM959.333 727.243V720.54H960.667V727.243H959.333ZM959.333 740.648V733.946H960.667V740.648H959.333ZM959.333 754.054V747.351H960.667V754.054H959.333ZM959.333 767.459V760.756H960.667V767.459H959.333ZM959.333 780.864V774.162H960.667V780.864H959.333ZM959.333 794.27V787.567H960.667V794.27H959.333ZM959.333 807.675V800.973H960.667V807.675H959.333ZM959.333 821.081V814.378H960.667V821.081H959.333ZM959.333 834.486V827.783H960.667V834.486H959.333ZM959.333 847.891V841.189H960.667V847.891H959.333ZM959.333 861.297V854.594H960.667V861.297H959.333ZM959.333 874.702V868H960.667V874.702H959.333ZM959.333 888.108V881.405H960.667V888.108H959.333ZM959.333 901.513V894.81H960.667V901.513H959.333ZM959.333 914.918V908.216H960.667V914.918H959.333ZM959.333 928.324V921.621H960.667V928.324H959.333ZM959.333 941.729V935.026H960.667V941.729H959.333ZM959.333 955.135V948.432H960.667V955.135H959.333ZM959.333 968.54V961.837H960.667V968.54H959.333ZM959.333 981.945V975.243H960.667V981.945H959.333ZM959.333 992V988.648H960.667V992H959.333Z" fill="white"/>
      </clipPath>
      <line ref="lineVert" opacity="0.5" x1="960" y1="0" x2="960" y2="992" stroke="white" stroke-width="2" clip-path="url(#modalDeliveryVert)" />
      <!-- </g> -->
    </svg>

    <div class="modal-delivery__inner">
      <div v-if="title" class="modal-delivery__title h2" ref="title">{{title}}</div>
      <slot></slot>
    </div>
  </div>
</template>

<script>
// import QuestionForm from '~/components/form/QuestionForm.vue';
import { gsap } from 'gsap';
import { animateJS } from "~/plugins/animations";

export default {
  // components: { QuestionForm },
  props: {
    title: {
      type: String,
      default: "",
    },
  },
  methods: {
    mobileHeight() {
      let vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty("--vh", `${vh}px`);
    },
    closeModal() {
      document.body.classList.remove("lock");
      this.$el.classList.remove("active");
    },
    openModal(){
      gsap.to(this.$refs.container, {
        opacity: 1,
        duration: 1,
        delay: 1
      })
    },
    animationBlocks() {
      setTimeout(() => {
        if (this.$refs.title) {
          animateJS('splitTitleRight', this.$refs.title);
        }
        if (this.$refs.lineHor) {
          animateJS('drawSvg', this.$refs.lineHor);
        }

        if (this.$refs.lineVert) {
          animateJS('drawSvg', this.$refs.lineVert);
        }
      }, 200);
      if (this.$refs.deliveryClose) {
        animateJS('fade', this.$refs.deliveryClose);
      }
    }
  },
  mounted() {
    this.mobileHeight();

    this.$nextTick(() => {
      // this.animationBlocks();
      // this.openModal();
    });
  },
};
</script>

<style lang="scss" scoped>
@import "~/assets/scss/utilities/indents";

.modal-delivery {
  width: 100vw;
  height: calc(var(--vh, 1vh) * 100);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.63);
  backdrop-filter: blur(24px);
  position: relative;
  position: fixed;
  z-index: 1000;
  top: 0;
  left: 0;
  // transform: translateY(-110%);
  // transition: transform 1s cubic-bezier(.37,.53,.38,1);
  transition: opacity 0.3s cubic-bezier(.37,.53,.38,1), visibility 0s linear 0.3s;
  display: flex;
  opacity: 0;
  visibility: hidden;

  &.active {
    // display: flex;
    visibility: visible;
    opacity: 1;
    // transform: translateY(0%);
    // transition: transform 1s cubic-bezier(.37,.53,.38,1);
    transition: opacity 0.3s cubic-bezier(.37,.53,.38,1), visibility 0s linear;

    & .modal-delivery__title{
      opacity: 1;
    }
    & .modal-delivery__line{
      opacity: 1;
    }
  }
}
.modal-delivery__close {
  width: 16px;
  height: 34px;
  position: absolute;
  z-index: 1001;
  top: 36px;
  right: 18px;
  cursor: pointer;

  @include min(tb) {
    width: 18px;
    height: 36px;
    top: 48px;
    right: 48px;
  }
  @include min(md) {
    right: 56px;
  }
  @include min(xl) {
    width: 20px;
    height: 42px;
    right: 64px;
  }
  @include min(bg) {
    width: 28px;
    height: 56px;
    right: 90px;
  }
}
.modal-delivery__line {
  display: none;

  @include min(tb) {
    display: block;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;

    opacity: 0;
    transition: opacity 0s linear 0.2s;
  }
}
.modal-delivery__line--hr {
  width: 100%;
  height: 2px;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
}
.modal-delivery__line--vr {
  width: 2px;
  height: 100%;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}
.modal-delivery__inner {
  margin: auto;
  width: 100%;

  @include min(tb) {
    width: 480px;
  }
  @include min(md) {
    width: 627px;
  }
  @include min(lg) {
    width: 816px;
  }
  @include min(bg) {
    width: 1116px;
  }
}
.modal-delivery__title {
  margin-bottom: 21px;
  text-align: right;
  color: #FFFFFF;
  position: relative;
  z-index: 2;
  opacity: 0;
  transition: opacity 0s linear 0.2s;

  @include min(tb) {
    margin-right: -10%;
    margin-left: auto;
    margin-bottom: -6px;
    width: 354px;
  }
  @include min(md) {
    width: 496px;
  }
  @include min(lg) {
    width: 580px;
  }
  @include min(xl) {
    margin-bottom: -12px;
  }
  @include min(bg) {
    width: 790px;
  }
}

.circle-btn {
  padding: 0;
  width: 141px;
  height: 141px;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  border-radius: 50%;
  border: none;
  background-color: $orange-color;
  position: relative;
  z-index: 10;
  cursor: pointer;

  @include min(lg) {
    width: 159px;
    height: 159px;
  }
  @include min(bg) {
    width: 200px;
    height: 200px;
  }
}
.circle-btn__text {
  margin-bottom: 24px;
  margin-left: 24px;
  padding-right: 16px;
  text-align: left;

  @include min(md) {
    margin-bottom: 28px;
    margin-left: 28px;
  }
  @include min(lg) {
    margin-bottom: 32px;
    margin-left: 32px;
    padding-right: 20px;
  }
  @include min(bg) {
    margin-bottom: 40px;
    margin-left: 40px;
    padding-right: 24px;
  }
}
.circle-btn__plus-wrap {
  width: 13px;
  height: 13px;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 30px;
  right: 30px;

  @include min(xl) {
    width: 17px;
    height: 17px;
    top: 32px;
    right: 32px;
  }
  @include min(bg) {
    width: 23px;
    height: 23px;
    top: 40px;
    right: 40px;
  }
}
.circle-btn__plus {
  position: relative;
  width: 13px;
  width: 100%;
  height: 1px;
  background-color: $black-color;
}
.circle-btn__plus::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 1px;
  height: 13px;
  background-color: $black-color;

  @include min(xl) {
    height: 17px;
  }
  @include min(bg) {
    height: 23px;
  }
}
.circle-btn.dark {
  background-color: $black-color;

  .circle-btn__text {
    color: #ffffff;
  }
  .circle-btn__plus {
    background-color: #ffffff;
  }
  .circle-btn__plus::before {
    background-color: #ffffff;
  }
}

@keyframes rotate-btn {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(180deg);
  }
}

@media (hover: hover) {
  .circle-btn:hover {
    .circle-btn__plus-wrap {
      animation: rotate-btn 0.5s linear;
    }
  }
}
</style>